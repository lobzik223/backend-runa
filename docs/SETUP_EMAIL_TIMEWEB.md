# Настройка почты Timeweb для RUNA (коды на email)

Почта **noreply@runafinance.online** на хостинге Timeweb используется для отправки кодов подтверждения регистрации и сброса пароля.

---

## Шаг 1. Создать почтовый ящик в Timeweb

1. Войдите в панель **Timeweb** (timeweb.cloud или timeweb.com).
2. В левом меню нажмите **«Почта»** (иконка конверта).
3. Выберите домен **runafinance.online** (если попросят).
4. Нажмите **«Создать почтовый ящик»** / **«Добавить ящик»**.
5. Укажите:
   - **Логин (часть до @):** `noreply`  
     Итоговый адрес: **noreply@runafinance.online**
   - **Пароль:** придумайте надёжный пароль и сохраните его (понадобится для `.env`).
6. Сохраните ящик.

---

## Шаг 2. Настройки SMTP Timeweb

Для **отправки** писем используется только **SMTP**. POP3 и IMAP — для приёма почты в программу, в бэкенде не нужны.

| Параметр   | Значение |
|-----------|----------|
| **Сервер (SMTP)** | `smtp.timeweb.ru` |
| **Порт**         | **465** (SSL, рекомендуется) или **2525** (без SSL) |
| **Логин**        | полный email: `noreply@runafinance.online` |
| **Пароль**       | пароль от ящика (из шага 1) |

POP3/IMAP (для справки, в .env не добавлять):
- pop3.timeweb.ru — приём по POP3
- imap.timeweb.ru — приём по IMAP

Подробнее: [Настройка почтовых клиентов Timeweb](https://timeweb.cloud/docs/mail/configuring-email-clients) или [Отправка почты через SMTP](https://timeweb.cloud/docs/cms/otpravka-pochty-cherez-smtp).

---

## Шаг 3. Добавить переменные в .env бэкенда

На сервере (или локально в папке `backend-runa`) откройте файл **`.env`** и добавьте:

```env
# SMTP Timeweb — почта noreply@runafinance.online
SMTP_HOST=smtp.timeweb.ru
SMTP_PORT=465
SMTP_USER=noreply@runafinance.online
SMTP_PASS=ваш_пароль_от_ящика
SMTP_FROM=noreply@runafinance.online
```

- **SMTP_PASS** — пароль, который вы задали при создании ящика (шаг 1).
- **SMTP_FROM** — можно не указывать, тогда будет использоваться **SMTP_USER**.

После сохранения `.env` перезапустите бэкенд.

---

## Шаг 4. Проверка

Когда в приложении будут включены эндпоинты «отправить код на почту» (регистрация / забыл пароль), запрос на отправку кода должен уходить на бэкенд, а письмо — приходить на указанный пользователем email.

Если письма не приходят:

- Проверьте папку **«Спам»** у получателя.
- В панели Timeweb в разделе **Почта** посмотрите логи отправки (если есть).
- Убедитесь, что в `.env` нет лишних пробелов и что пароль указан верно.

---

## Кратко

1. **Timeweb** → **Почта** → создать ящик **noreply@runafinance.online**, сохранить пароль.
2. В **`.env`** бэкенда прописать **SMTP_HOST**, **SMTP_PORT**, **SMTP_USER**, **SMTP_PASS** (и при желании **SMTP_FROM**).
3. Перезапустить бэкенд.

После этого модуль отправки писем (EmailService) сможет отправлять коды через Timeweb.
